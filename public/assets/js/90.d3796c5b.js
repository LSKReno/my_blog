(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{344:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_008-数据故障"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_008-数据故障","aria-hidden":"true"}},[t._v("#")]),t._v(" 008 - 数据故障")]),t._v(" "),s("h2",{attrs:{id:"_1-响应时间长"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-响应时间长","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 响应时间长")]),t._v(" "),s("p",[t._v("对于一般的Web服务来说，响应时间应该在200ms以内。")]),t._v(" "),s("p",[t._v("对于一般的MongoDB请求来说，响应时间应该在100ms以内。")]),t._v(" "),s("p",[t._v("解决办法：")]),t._v(" "),s("ul",[s("li",[t._v("合适的索引")]),t._v(" "),s("li",[t._v("工作集超出RAM的大小，即内存不足（使用 mongostat 查看服务器状态）")])]),t._v(" "),s("h2",{attrs:{id:"_2-连接失败"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-连接失败","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 连接失败")]),t._v(" "),s("p",[t._v("默认情况下，mongod进程可以支持多达65536个连接。")]),t._v(" "),s("p",[s("strong",[t._v("不恰当的配置可能限制连接数")])]),t._v(" "),s("p",[t._v("查看支持的连接数")]),t._v(" "),s("p",[s("code",[t._v("db.serverStatus().connections")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("# 可以在服务器的Mongodb配置文件中进行更改最大支持连接数\nnet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" maxIncomingConnections"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\nstorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n\tdbPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("db \n\twiredTiger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n\t\tengineConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n\t\t\tcacheSizeGB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);